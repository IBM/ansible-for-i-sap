<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Role install_saphostagent &mdash; IBM ansible-for-i-sap collection 1.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Role sap_install_app_server" href="sap_install_app_server.html" />
    <link rel="prev" title="Installation and configuration" href="install_and_config.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> IBM ansible-for-i-sap collection
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Installation and configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install_and_config.html">Installation and configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Available roles</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Role install_saphostagent</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tags">Tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#remarks">Remarks:</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#defaults">Defaults</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-playbook">Example Playbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="#license">License</a></li>
<li class="toctree-l2"><a class="reference internal" href="#author-information">Author Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sap_install_app_server.html">Role sap_install_app_server</a></li>
<li class="toctree-l1"><a class="reference internal" href="sap_opsyscheck.html">Role sap_opsyscheck</a></li>
<li class="toctree-l1"><a class="reference internal" href="start_sap.html">Role start_sap</a></li>
<li class="toctree-l1"><a class="reference internal" href="stop_sap.html">Role stop_sap</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_sap_kernel.html">Role upgrade_sap_kernel</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IBM ansible-for-i-sap collection</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Role install_saphostagent</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/IBM/ansible-for-i-sap/blob/main/docs/docsite/install_saphostagent.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="role-install-saphostagent">
<span id="ibm-ansible-for-i-sap-docsite-install-saphostagent"></span><h1><a class="toc-backref" href="#id13">Role install_saphostagent</a><a class="headerlink" href="#role-install-saphostagent" title="Permalink to this headline"></a></h1>
<p>The SAP Host Agent is an agent that can accomplish several life-cycle management tasks, such as operating system monitoring, database monitoring, system instance control and provisioning. For the database IBM Db2 for i, it also contains the server component of the remote database driver DBSLDirectDrive. It must be installed on any logical partition that is hosting one or multiple SAP NetWeaver instances, and it can also be installed on logical partitions that do not contain any other SAP coding.</p>
<p>SAP is providing bug fixes and enhancements for the SAP Host Agent several times per year. It is advised to update the SAP Host Agent with the current version from time to time as preventive action. SAP is providing the SAP Host Agent in the SAP Software Distribution Center (<a class="reference external" href="https://support.sap.com/swdc">SWDC</a>) as an SAP Archive (SAR) file. The role install_saphostagent can be used to install or upgrade the SAP Host Agent from a downloaded SAR file according to the SAP documentation in <a class="reference external" href="https://launchpad.support.sap.com/#/notes/1031096">SAP Note 1031096</a>.</p>
<p>When the SAP Host Agent is installed for the first time in a logical partition that is running with IBM i, it will create a group profile named R3GROUP. To avoid authority problems in a distributed landscape, it is recommended that the group profile R3GROUP has the same group ID on all logical partitions in that landscape. Because of that, the landscape-wide numeric group ID of group profile R3GROUP must be specified in variable <code class="docutils literal notranslate"><span class="pre">insshagnt_r3group_gid</span></code> before running the playbook on a freshly installed logical partition.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title">Table of contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#role-install-saphostagent" id="id13">Role install_saphostagent</a></p>
<ul>
<li><p><a class="reference internal" href="#requirements" id="id14">Requirements</a></p></li>
<li><p><a class="reference internal" href="#tags" id="id15">Tags</a></p></li>
<li><p><a class="reference internal" href="#variables" id="id16">Variables</a></p></li>
<li><p><a class="reference internal" href="#defaults" id="id17">Defaults</a></p></li>
<li><p><a class="reference internal" href="#dependencies" id="id18">Dependencies</a></p></li>
<li><p><a class="reference internal" href="#example-playbook" id="id19">Example Playbook</a></p></li>
<li><p><a class="reference internal" href="#license" id="id20">License</a></p></li>
<li><p><a class="reference internal" href="#author-information" id="id21">Author Information</a></p></li>
<li><p><a class="reference internal" href="#copyright" id="id22">Copyright</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="requirements">
<h2><a class="toc-backref" href="#id14">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h2>
<p>This role is intended for the operating system IBM i. The target system must be enabled to execute Ansible playbooks. For details, see the prerequisites section in <a class="reference internal" href="install_and_config.html#ibm-ansible-for-i-sap-docsite-install-and-config-prerequisites"><span class="std std-ref">Ansible Content for IBM Power Systems - IBM i with SAP Software</span></a>.</p>
<p>The role install_saphostagent must be executed as user profile QSECOFR or a user profile with similar authorities, user class <em>*SECOFR</em> or at least special authorities <em>*ALLOBJ</em>, <em>*SECADM</em> and <em>*JOBCTL</em>.</p>
</section>
<section id="tags">
<h2><a class="toc-backref" href="#id15">Tags</a><a class="headerlink" href="#tags" title="Permalink to this headline"></a></h2>
<p>The following tag can be specified optionally. Omitting the tag or specifying tag <code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">all</span></code> has the same effect.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Tag</p></th>
<th class="head"><p>Usage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">install_saphostagent</span></code></p></td>
<td><p>Install the SAP Host Agent.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="variables">
<h2><a class="toc-backref" href="#id16">Variables</a><a class="headerlink" href="#variables" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 29%" />
<col style="width: 64%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Usage</p></th>
<th class="head"><p>Required</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_download_managednode</span></code></p></td>
<td><p>Directory path on the target host where SAR file is located</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id9" id="id1">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_input_file_saphostagent_sar</span></code></p></td>
<td><p>Name of the SAR file in the download directory on the target host that contains the SAP Host Agent</p></td>
<td><p>No <a class="footnote-reference brackets" href="#id10" id="id2">2</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_sapcar_default_managednode</span></code></p></td>
<td><p>Fallback directory on the target host where SAPCAR is searched</p></td>
<td><p>No <a class="footnote-reference brackets" href="#id9" id="id3">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_sapcar_managednode</span></code></p></td>
<td><p>Directory path on the target host where SAPCAR is located</p></td>
<td><p>No <a class="footnote-reference brackets" href="#id11" id="id4">3</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_file_sapcar</span></code></p></td>
<td><p>Local SAPCAR file name</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id9" id="id5">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_temp_managednode</span></code></p></td>
<td><p>Temporary directory path that will be created on the target host</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id9" id="id6">1</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_bool_clean_dir_temp_managednode</span></code></p></td>
<td><p>Boolean variable to indicate if the temporary directory will be removed or not after the installation</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id9" id="id7">1</a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_r3group_gid</span></code></p></td>
<td><p>Group ID to specify when creating user profile R3GROUP</p></td>
<td><p>Yes <a class="footnote-reference brackets" href="#id12" id="id8">4</a></p></td>
</tr>
</tbody>
</table>
<section id="remarks">
<h3>Remarks:<a class="headerlink" href="#remarks" title="Permalink to this headline"></a></h3>
<dl class="footnote brackets">
<dt class="label" id="id9"><span class="brackets">1</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id3">2</a>,<a href="#id5">3</a>,<a href="#id6">4</a>,<a href="#id7">5</a>)</span></dt>
<dd><p>Default provided.</p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Defaults to the alphanumerically last filename in <code class="docutils literal notranslate"><span class="pre">insshagnt_dir_download_managednode</span></code> that is matching the pattern “*.SAR” or “*.sar”.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id4">3</a></span></dt>
<dd><p>When <code class="docutils literal notranslate"><span class="pre">insshagnt_dir_sapcar_managednode</span></code> is undefined, SAPCAR will be searched in <code class="docutils literal notranslate"><span class="pre">insshagnt_dir_download_managednode</span></code> and <code class="docutils literal notranslate"><span class="pre">insshagnt_dir_sapcar_default_managednode</span></code>.</p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id8">4</a></span></dt>
<dd><p>Only when user profile R3GROUP does not yet exist.</p>
</dd>
</dl>
</section>
</section>
<section id="defaults">
<h2><a class="toc-backref" href="#id17">Defaults</a><a class="headerlink" href="#defaults" title="Permalink to this headline"></a></h2>
<p>Suggested default values are provided in defaults/main.yml:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 62%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_download_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/tmp/downloads&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_sapcar_default_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/usr/sap/hostctrl/exe&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_file_sapcar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;SAPCAR&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_dir_temp_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;/tmp/hostctrl&quot;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_bool_clean_dir_temp_managednode</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">insshagnt_install_cmd_args</span></code></p></td>
<td><p>For internal use only</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dependencies">
<h2><a class="toc-backref" href="#id18">Dependencies</a><a class="headerlink" href="#dependencies" title="Permalink to this headline"></a></h2>
<p>None.</p>
</section>
<section id="example-playbook">
<h2><a class="toc-backref" href="#id19">Example Playbook</a><a class="headerlink" href="#example-playbook" title="Permalink to this headline"></a></h2>
<p>The example playbook is based on the assumption that a configuration file and an inventory file with contents similar to the <a class="reference internal" href="install_and_config.html#ibm-ansible-for-i-sap-docsite-install-and-config-configuration"><span class="std std-ref">configuration documentation</span></a> exist in the current directory. The necessary SAP Host Agent archive must have been downloaded from the SAP Software Distribution Center and stored in directory /tmp/downloads/saphostagent. The SAPCAR executable is available from a previous version of the SAP Host Agent in directory /usr/sap/hostctrl/exe or has been downloaded from the SAP Software Distribution Center into the download directory. The example playbook in the current directory is named install_saphostagent.yml and has the following contents:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ibmi_servers</span><span class="w"></span>
<span class="w">  </span><span class="nt">vars</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">insshagnt_dir_download_managednode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/downloads/saphostagent&quot;</span><span class="w"></span>
<span class="w">  </span><span class="nt">roles</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;ansible_dir&gt;/roles/install_saphostagent</span><span class="w"></span>
</pre></div>
</div>
<p>To execute this playbook, enter the command:</p>
<div class="highlight-YAML notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">ansible-playbook --verbose install_saphostagent.yml</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="license">
<h2><a class="toc-backref" href="#id20">License</a><a class="headerlink" href="#license" title="Permalink to this headline"></a></h2>
<p>This collection is licensed under the <a class="reference external" href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>.</p>
</section>
<section id="author-information">
<h2><a class="toc-backref" href="#id21">Author Information</a><a class="headerlink" href="#author-information" title="Permalink to this headline"></a></h2>
<p>SAP on IBM Power Development Team</p>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#id22">Copyright</a><a class="headerlink" href="#copyright" title="Permalink to this headline"></a></h2>
<p>Copyright IBM Corporation 2021,2022</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install_and_config.html" class="btn btn-neutral float-left" title="Installation and configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="sap_install_app_server.html" class="btn btn-neutral float-right" title="Role sap_install_app_server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021,2022, IBM.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>